# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (Deployment)

–í –¥–∞–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ–ø–∏—Å–∞–Ω –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ **3D Mannequin**. –ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –±–∞–∑–µ **Next.js 14+ (App Router)** –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–µ—Ä–∞ (NestJS API –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ Next.js API Routes).

## 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

### –û–∫—Ä—É–∂–µ–Ω–∏–µ
- **Node.js:** –≤–µ—Ä—Å–∏—è 18.17 –∏–ª–∏ –≤—ã—à–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è LTS).
- **–ü–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä:** Bun 1.0+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ npm/yarn/pnpm.
- **–û–°:** Linux (Ubuntu/Debian), macOS –∏–ª–∏ Windows.

### –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **RAM:** –ú–∏–Ω–∏–º—É–º 1GB (–¥–ª—è —Å–±–æ—Ä–∫–∏).
- **CPU:** 1 —è–¥—Ä–æ (–º–∏–Ω–∏–º—É–º).

---

## 2. –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**
   ```bash
   git clone https://github.com/Melik1986/3D-Mannequin.git
   cd 3D-Mannequin
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `bun` –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏, –∏–ª–∏ `npm` –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É.
   ```bash
   bun install
   # –∏–ª–∏
   npm install --legacy-peer-deps
   ```

---

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º. –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º, —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```bash
# –ü—Ä–∏–º–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
NEXT_PUBLIC_API_URL=https://api.example.com
```

–î–ª—è —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è **–Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è**.

---

## 4. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –∑–∞–ø—É—Å–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
bun dev
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:3000
```

### –ü—Ä–æ–¥–∞–∫—à–Ω (Vercel - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Vercel CLI](https://vercel.com/docs/cli): `npm i -g vercel`
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å: `vercel login`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π:
   ```bash
   vercel
   # –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
   vercel --prod
   ```

### –ü—Ä–æ–¥–∞–∫—à–Ω (–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä / VPS)

1. **–°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   ```bash
   bun run build
   # –°–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–±–æ—Ä–∫—É –≤ –ø–∞–ø–∫–µ .next
   ```

2. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   bun start
   # –ó–∞–ø—É—Å–∫–∞–µ—Ç Node.js —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 3000
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Process Manager (PM2):**
   –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ VPS —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PM2.
   ```bash
   npm install -g pm2
   pm2 start npm --name "3d-mannequin" -- start
   ```

### Docker (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–°–æ–∑–¥–∞–π—Ç–µ `Dockerfile` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```dockerfile
FROM oven/bun:1 as base
WORKDIR /app
COPY . .
RUN bun install
RUN bun run build
EXPOSE 3000
CMD ["bun", "start"]
```

–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:
```bash
docker build -t 3d-mannequin .
docker run -p 3000:3000 3d-mannequin
```

---

## 5. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: `JavaScript heap out of memory` –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç –ø–∞–º—è—Ç–∏ –¥–ª—è Node.js.
```bash
export NODE_OPTIONS="--max-old-space-size=4096"
bun run build
```

### –û—à–∏–±–∫–∞: 404 –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–∞—Ö (–∫–∞—Ä—Ç–∏–Ω–∫–∏/—Å–ø—Ä–∞–π—Ç—ã)
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–µ –ø—É—Ç–∏ –≤ `public` –∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤.
**–†–µ—à–µ–Ω–∏–µ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –ª–µ–∂–∞—Ç –≤ `public/costum/`.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `frame-0.png` vs `Frame-0.png`). Linux —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É!

### –û—à–∏–±–∫–∞: PixiJS –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç canvas
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å WebGL –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏–ª–∏ SSR.
**–†–µ—à–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `MannequinViewer` –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å `ssr: false` (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `ProductPageClient.tsx`).

### –û—à–∏–±–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–∏ `npm install`
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--legacy-peer-deps` –∏–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `bun install`.
